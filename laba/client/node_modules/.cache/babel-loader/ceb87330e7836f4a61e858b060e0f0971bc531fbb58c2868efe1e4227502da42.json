{"ast":null,"code":"var _jsxFileName = \"/Users/taulan/Desktop/laba/client/src/pages/Cart.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useCart } from '../context/CartContext';\nimport { useNavigate } from 'react-router-dom';\nimport api from '../api';\nimport { Container, Paper, Typography, List, ListItem, ListItemText, ListItemSecondaryAction, IconButton, Button, TextField, Box } from '@mui/material';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport AddIcon from '@mui/icons-material/Add';\nimport RemoveIcon from '@mui/icons-material/Remove';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Cart() {\n  _s();\n  const {\n    cartItems,\n    removeFromCart,\n    updateQuantity,\n    clearCart\n  } = useCart();\n  const navigate = useNavigate();\n  const handleQuantityChange = (item, newQuantity) => {\n    if (newQuantity > 0 && newQuantity <= item.stock) {\n      updateQuantity(item.id, newQuantity);\n    }\n  };\n  const handleCheckout = async () => {\n    try {\n      const order = {\n        customerName: 'Покупатель',\n        totalAmount: total,\n        items: cartItems\n      };\n      await api.createOrder(order);\n      clearCart();\n      navigate('/orders');\n      alert('Заказ успешно оформлен!');\n    } catch (error) {\n      console.error('Ошибка при оформлении заказа:', error);\n      alert('Ошибка при оформлении заказа');\n    }\n  };\n  const total = cartItems.reduce((sum, item) => sum + item.price * item.quantity, 0);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    sx: {\n      py: 4\n    },\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      sx: {\n        p: 3\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        gutterBottom: true,\n        children: \"\\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), cartItems.length === 0 ? /*#__PURE__*/_jsxDEV(Typography, {\n        children: \"\\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430 \\u043F\\u0443\\u0441\\u0442\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(List, {\n          children: cartItems.map(item => /*#__PURE__*/_jsxDEV(ListItem, {\n            children: [/*#__PURE__*/_jsxDEV(ListItemText, {\n              primary: item.name,\n              secondary: `${item.price} ₽ за шт.`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                alignItems: 'center',\n                mr: 2\n              },\n              children: [/*#__PURE__*/_jsxDEV(IconButton, {\n                size: \"small\",\n                onClick: () => handleQuantityChange(item, item.quantity - 1),\n                disabled: item.quantity <= 1,\n                children: /*#__PURE__*/_jsxDEV(RemoveIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 74,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                sx: {\n                  width: 60,\n                  mx: 1\n                },\n                value: item.quantity,\n                type: \"number\",\n                onChange: e => handleQuantityChange(item, parseInt(e.target.value)),\n                inputProps: {\n                  min: 1,\n                  max: item.stock\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                size: \"small\",\n                onClick: () => handleQuantityChange(item, item.quantity + 1),\n                disabled: item.quantity >= item.stock,\n                children: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 88,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              children: [item.price * item.quantity, \" \\u20BD\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(ListItemSecondaryAction, {\n              children: /*#__PURE__*/_jsxDEV(IconButton, {\n                edge: \"end\",\n                onClick: () => removeFromCart(item.id),\n                children: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 96,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 19\n            }, this)]\n          }, item.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          sx: {\n            mt: 2,\n            mb: 2\n          },\n          children: [\"\\u0418\\u0442\\u043E\\u0433\\u043E: \", total, \" \\u20BD\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: handleCheckout,\n          disabled: cartItems.length === 0,\n          children: \"\\u041E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n}\n_s(Cart, \"dWPfcKWGD9iTkPhpD9FFXmG/EA4=\", false, function () {\n  return [useCart, useNavigate];\n});\n_c = Cart;\nexport default Cart;\nvar _c;\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"names":["React","useCart","useNavigate","api","Container","Paper","Typography","List","ListItem","ListItemText","ListItemSecondaryAction","IconButton","Button","TextField","Box","DeleteIcon","AddIcon","RemoveIcon","jsxDEV","_jsxDEV","Fragment","_Fragment","Cart","_s","cartItems","removeFromCart","updateQuantity","clearCart","navigate","handleQuantityChange","item","newQuantity","stock","id","handleCheckout","order","customerName","totalAmount","total","items","createOrder","alert","error","console","reduce","sum","price","quantity","sx","py","children","p","variant","gutterBottom","fileName","_jsxFileName","lineNumber","columnNumber","length","map","primary","name","secondary","display","alignItems","mr","size","onClick","disabled","width","mx","value","type","onChange","e","parseInt","target","inputProps","min","max","edge","mt","mb","color","_c","$RefreshReg$"],"sources":["/Users/taulan/Desktop/laba/client/src/pages/Cart.js"],"sourcesContent":["import React from 'react';\nimport { useCart } from '../context/CartContext';\nimport { useNavigate } from 'react-router-dom';\nimport api from '../api';\nimport {\n  Container,\n  Paper,\n  Typography,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemSecondaryAction,\n  IconButton,\n  Button,\n  TextField,\n  Box,\n} from '@mui/material';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport AddIcon from '@mui/icons-material/Add';\nimport RemoveIcon from '@mui/icons-material/Remove';\n\nfunction Cart() {\n  const { cartItems, removeFromCart, updateQuantity, clearCart } = useCart();\n  const navigate = useNavigate();\n\n  const handleQuantityChange = (item, newQuantity) => {\n    if (newQuantity > 0 && newQuantity <= item.stock) {\n      updateQuantity(item.id, newQuantity);\n    }\n  };\n\n  const handleCheckout = async () => {\n    try {\n      const order = {\n        customerName: 'Покупатель',\n        totalAmount: total,\n        items: cartItems,\n      };\n      await api.createOrder(order);\n      clearCart();\n      navigate('/orders');\n      alert('Заказ успешно оформлен!');\n    } catch (error) {\n      console.error('Ошибка при оформлении заказа:', error);\n      alert('Ошибка при оформлении заказа');\n    }\n  };\n\n  const total = cartItems.reduce((sum, item) => sum + item.price * item.quantity, 0);\n\n  return (\n    <Container sx={{ py: 4 }}>\n      <Paper sx={{ p: 3 }}>\n        <Typography variant=\"h5\" gutterBottom>\n          Корзина\n        </Typography>\n        {cartItems.length === 0 ? (\n          <Typography>Корзина пуста</Typography>\n        ) : (\n          <>\n            <List>\n              {cartItems.map((item) => (\n                <ListItem key={item.id}>\n                  <ListItemText\n                    primary={item.name}\n                    secondary={`${item.price} ₽ за шт.`}\n                  />\n                  <Box sx={{ display: 'flex', alignItems: 'center', mr: 2 }}>\n                    <IconButton\n                      size=\"small\"\n                      onClick={() => handleQuantityChange(item, item.quantity - 1)}\n                      disabled={item.quantity <= 1}\n                    >\n                      <RemoveIcon />\n                    </IconButton>\n                    <TextField\n                      sx={{ width: 60, mx: 1 }}\n                      value={item.quantity}\n                      type=\"number\"\n                      onChange={(e) => handleQuantityChange(item, parseInt(e.target.value))}\n                      inputProps={{ min: 1, max: item.stock }}\n                    />\n                    <IconButton\n                      size=\"small\"\n                      onClick={() => handleQuantityChange(item, item.quantity + 1)}\n                      disabled={item.quantity >= item.stock}\n                    >\n                      <AddIcon />\n                    </IconButton>\n                  </Box>\n                  <Typography variant=\"body2\">\n                    {item.price * item.quantity} ₽\n                  </Typography>\n                  <ListItemSecondaryAction>\n                    <IconButton edge=\"end\" onClick={() => removeFromCart(item.id)}>\n                      <DeleteIcon />\n                    </IconButton>\n                  </ListItemSecondaryAction>\n                </ListItem>\n              ))}\n            </List>\n            <Typography variant=\"h6\" sx={{ mt: 2, mb: 2 }}>\n              Итого: {total} ₽\n            </Typography>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={handleCheckout}\n              disabled={cartItems.length === 0}\n            >\n              Оформить заказ\n            </Button>\n          </>\n        )}\n      </Paper>\n    </Container>\n  );\n}\n\nexport default Cart; "],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,wBAAwB;AAChD,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,GAAG,MAAM,QAAQ;AACxB,SACEC,SAAS,EACTC,KAAK,EACLC,UAAU,EACVC,IAAI,EACJC,QAAQ,EACRC,YAAY,EACZC,uBAAuB,EACvBC,UAAU,EACVC,MAAM,EACNC,SAAS,EACTC,GAAG,QACE,eAAe;AACtB,OAAOC,UAAU,MAAM,4BAA4B;AACnD,OAAOC,OAAO,MAAM,yBAAyB;AAC7C,OAAOC,UAAU,MAAM,4BAA4B;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEpD,SAASC,IAAIA,CAAA,EAAG;EAAAC,EAAA;EACd,MAAM;IAAEC,SAAS;IAAEC,cAAc;IAAEC,cAAc;IAAEC;EAAU,CAAC,GAAG1B,OAAO,CAAC,CAAC;EAC1E,MAAM2B,QAAQ,GAAG1B,WAAW,CAAC,CAAC;EAE9B,MAAM2B,oBAAoB,GAAGA,CAACC,IAAI,EAAEC,WAAW,KAAK;IAClD,IAAIA,WAAW,GAAG,CAAC,IAAIA,WAAW,IAAID,IAAI,CAACE,KAAK,EAAE;MAChDN,cAAc,CAACI,IAAI,CAACG,EAAE,EAAEF,WAAW,CAAC;IACtC;EACF,CAAC;EAED,MAAMG,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjC,IAAI;MACF,MAAMC,KAAK,GAAG;QACZC,YAAY,EAAE,YAAY;QAC1BC,WAAW,EAAEC,KAAK;QAClBC,KAAK,EAAEf;MACT,CAAC;MACD,MAAMrB,GAAG,CAACqC,WAAW,CAACL,KAAK,CAAC;MAC5BR,SAAS,CAAC,CAAC;MACXC,QAAQ,CAAC,SAAS,CAAC;MACnBa,KAAK,CAAC,yBAAyB,CAAC;IAClC,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;MACrDD,KAAK,CAAC,8BAA8B,CAAC;IACvC;EACF,CAAC;EAED,MAAMH,KAAK,GAAGd,SAAS,CAACoB,MAAM,CAAC,CAACC,GAAG,EAAEf,IAAI,KAAKe,GAAG,GAAGf,IAAI,CAACgB,KAAK,GAAGhB,IAAI,CAACiB,QAAQ,EAAE,CAAC,CAAC;EAElF,oBACE5B,OAAA,CAACf,SAAS;IAAC4C,EAAE,EAAE;MAAEC,EAAE,EAAE;IAAE,CAAE;IAAAC,QAAA,eACvB/B,OAAA,CAACd,KAAK;MAAC2C,EAAE,EAAE;QAAEG,CAAC,EAAE;MAAE,CAAE;MAAAD,QAAA,gBAClB/B,OAAA,CAACb,UAAU;QAAC8C,OAAO,EAAC,IAAI;QAACC,YAAY;QAAAH,QAAA,EAAC;MAEtC;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAY,CAAC,EACZjC,SAAS,CAACkC,MAAM,KAAK,CAAC,gBACrBvC,OAAA,CAACb,UAAU;QAAA4C,QAAA,EAAC;MAAa;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAY,CAAC,gBAEtCtC,OAAA,CAAAE,SAAA;QAAA6B,QAAA,gBACE/B,OAAA,CAACZ,IAAI;UAAA2C,QAAA,EACF1B,SAAS,CAACmC,GAAG,CAAE7B,IAAI,iBAClBX,OAAA,CAACX,QAAQ;YAAA0C,QAAA,gBACP/B,OAAA,CAACV,YAAY;cACXmD,OAAO,EAAE9B,IAAI,CAAC+B,IAAK;cACnBC,SAAS,EAAE,GAAGhC,IAAI,CAACgB,KAAK;YAAY;cAAAQ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACrC,CAAC,eACFtC,OAAA,CAACL,GAAG;cAACkC,EAAE,EAAE;gBAAEe,OAAO,EAAE,MAAM;gBAAEC,UAAU,EAAE,QAAQ;gBAAEC,EAAE,EAAE;cAAE,CAAE;cAAAf,QAAA,gBACxD/B,OAAA,CAACR,UAAU;gBACTuD,IAAI,EAAC,OAAO;gBACZC,OAAO,EAAEA,CAAA,KAAMtC,oBAAoB,CAACC,IAAI,EAAEA,IAAI,CAACiB,QAAQ,GAAG,CAAC,CAAE;gBAC7DqB,QAAQ,EAAEtC,IAAI,CAACiB,QAAQ,IAAI,CAAE;gBAAAG,QAAA,eAE7B/B,OAAA,CAACF,UAAU;kBAAAqC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACJ,CAAC,eACbtC,OAAA,CAACN,SAAS;gBACRmC,EAAE,EAAE;kBAAEqB,KAAK,EAAE,EAAE;kBAAEC,EAAE,EAAE;gBAAE,CAAE;gBACzBC,KAAK,EAAEzC,IAAI,CAACiB,QAAS;gBACrByB,IAAI,EAAC,QAAQ;gBACbC,QAAQ,EAAGC,CAAC,IAAK7C,oBAAoB,CAACC,IAAI,EAAE6C,QAAQ,CAACD,CAAC,CAACE,MAAM,CAACL,KAAK,CAAC,CAAE;gBACtEM,UAAU,EAAE;kBAAEC,GAAG,EAAE,CAAC;kBAAEC,GAAG,EAAEjD,IAAI,CAACE;gBAAM;cAAE;gBAAAsB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACzC,CAAC,eACFtC,OAAA,CAACR,UAAU;gBACTuD,IAAI,EAAC,OAAO;gBACZC,OAAO,EAAEA,CAAA,KAAMtC,oBAAoB,CAACC,IAAI,EAAEA,IAAI,CAACiB,QAAQ,GAAG,CAAC,CAAE;gBAC7DqB,QAAQ,EAAEtC,IAAI,CAACiB,QAAQ,IAAIjB,IAAI,CAACE,KAAM;gBAAAkB,QAAA,eAEtC/B,OAAA,CAACH,OAAO;kBAAAsC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACD,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACV,CAAC,eACNtC,OAAA,CAACb,UAAU;cAAC8C,OAAO,EAAC,OAAO;cAAAF,QAAA,GACxBpB,IAAI,CAACgB,KAAK,GAAGhB,IAAI,CAACiB,QAAQ,EAAC,SAC9B;YAAA;cAAAO,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CAAC,eACbtC,OAAA,CAACT,uBAAuB;cAAAwC,QAAA,eACtB/B,OAAA,CAACR,UAAU;gBAACqE,IAAI,EAAC,KAAK;gBAACb,OAAO,EAAEA,CAAA,KAAM1C,cAAc,CAACK,IAAI,CAACG,EAAE,CAAE;gBAAAiB,QAAA,eAC5D/B,OAAA,CAACJ,UAAU;kBAAAuC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACJ;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACU,CAAC;UAAA,GAnCb3B,IAAI,CAACG,EAAE;YAAAqB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAoCZ,CACX;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC,eACPtC,OAAA,CAACb,UAAU;UAAC8C,OAAO,EAAC,IAAI;UAACJ,EAAE,EAAE;YAAEiC,EAAE,EAAE,CAAC;YAAEC,EAAE,EAAE;UAAE,CAAE;UAAAhC,QAAA,GAAC,kCACtC,EAACZ,KAAK,EAAC,SAChB;QAAA;UAAAgB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAY,CAAC,eACbtC,OAAA,CAACP,MAAM;UACLwC,OAAO,EAAC,WAAW;UACnB+B,KAAK,EAAC,SAAS;UACfhB,OAAO,EAAEjC,cAAe;UACxBkC,QAAQ,EAAE5C,SAAS,CAACkC,MAAM,KAAK,CAAE;UAAAR,QAAA,EAClC;QAED;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA,eACT,CACH;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACI;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEhB;AAAClC,EAAA,CAhGQD,IAAI;EAAA,QACsDrB,OAAO,EACvDC,WAAW;AAAA;AAAAkF,EAAA,GAFrB9D,IAAI;AAkGb,eAAeA,IAAI;AAAC,IAAA8D,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}